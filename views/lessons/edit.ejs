<div class="page">
  <header class="page-header">
    <div>
      <h1>Edit Lesson</h1>
      <p class="muted">
        Course: <strong><%= course ? course.title : 'Unknown' %></strong>
      </p>
    </div>

    <div class="header-actions">
      <a class="btn-secondary" href="/lessons/<%= lesson.id %>">View</a>
      <a class="link" href="/lessons?course_id=<%= lesson.course_id %>">‚Üê Back to Lessons</a>
    </div>
  </header>

  <% if (error) { %>
    <div class="error"><%= error %></div>
  <% } %>

  <form class="form" method="POST" action="/lessons/<%= lesson.id %>">
    <label class="label">
      Title
      <input class="input" type="text" name="title" value="<%= form.title %>" required>
    </label>

    <label class="label">
      Description (optional)
      <textarea class="textarea" name="description" rows="4"><%= form.description %></textarea>
    </label>

    <label class="label">
      Video URL (optional)
      <input class="input" type="text" name="video_url" value="<%= form.video_url %>">
    </label>

    <div class="form-row">
      <label class="label">
        Position
        <input class="input" type="number" name="position" min="0" value="<%= form.position %>">
      </label>

      <label class="label">
        Published
        <select class="input" name="is_published">
          <option value="0" <%= String(form.is_published) === '0' ? 'selected' : '' %>>Draft</option>
          <option value="1" <%= String(form.is_published) === '1' ? 'selected' : '' %>>Published</option>
        </select>
      </label>
    </div>

    <div class="card-actions">
      <button class="btn" type="submit">Save</button>

      <form method="POST" action="/lessons/<%= lesson.id %>/delete" class="inline-form"
            onsubmit="return confirm('Delete this lesson?');">
        <button class="btn-danger" type="submit">Delete</button>
      </form>
    </div>
  </form>
</div>
